{
  "$id": "https://onoffice.com/onOffice-api-json-schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "onOffice API",
  "description": "json-schema for onOffice API (https://apidoc.onoffice.de)",

  "definitions": {

      "hmac": {
        "type": "string",
        "maxLength": 32,
        "minLength": 32
      },
      "timestamp": {
        "type": "integer"
      }

  },

  "type": "object",
  "properties": {
    "token": {
      "type": "string"
    },
    "request": {
      "type": "object",
      "properties": {
        "actions": {
          "type": "array",
          "items": {
            "type": "object",
            "oneOf": [
              {
                  "properties": {
                    "resourceid": {
                      "type": "string"
                    },
                    "identifier": {
                      "type": "string"
                    },
                    "hmac": {
                      "$ref": "#/definitions/hmac"
                    },
                    "timestamp": {
                      "$ref": "#/definitions/timestamp"
                    },

                    "actionid": {
                      "const": "urn:onoffice-de-ns:smart:2.5:smartml:action:read"
                    },
                    "resourcetype": {
                      "const": "address"
                    },
                    "parameters": {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "array"
                        },
                        "recordids": {
                          "type": "array",
                          "items": {
                            "type": "integer"
                          }
                        },
                        "filterid": {
                          "type": "integer"
                        },
                        "filter": {
                          "type": "object"
                        },
                        "listlimit": {
                          "type": "integer"
                        },
                        "listoffset": {
                          "type": "integer"
                        },
                        "sortby": {
                          "type": "string"
                        },
                        "sortorder": {
                          "type": "string",
                          "enum": [
                            "ASC",
                            "DESC"
                          ]
                        },
                        "formatoutput": {
                          "type": "boolean"
                        },
                        "outputlanguage": {
                          "type": "string",
                          "minLength": 3,
                          "maxLength": 3
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                "required": ["hmac", "timestamp", "actionid"],
                "additionalProperties": false
              },
              {
                "properties": {
                  "resourceid": {
                    "type": "string"
                  },
                  "identifier": {
                    "type": "string"
                  },
                  "hmac": {
                    "$ref": "#/definitions/hmac"
                  },
                  "timestamp": {
                    "$ref": "#/definitions/timestamp"
                  },
                  "actionid": {
                    "const": "urn:onoffice-de-ns:smart:2.5:smartml:action:read"
                  },
                  "resourcetype": {
                    "const": "agentslog"
                  },
                  "parameters": {
                    "type": "object",
                    "properties": {
                      "data": {
                        "type": "array",
                        "items": {
                          "type": "string",
                          "enum": [
                            "Objekt_nr",
                            "Adress_nr",
                            "Aktionsart",
                            "Aktionstyp",
                            "Datum",
                            "created",
                            "Benutzer",
                            "Benutzer_nr",
                            "Datum_bearb",
                            "Kosten",
                            "Bemerkung",
                            "merkmal"
                          ]
                        }
                      },
                      "estateid": {"type":  "integer"},
                      "adressid": {"type":  "integer"},
                      "listlimit": {"type":  "integer", "maximum": 500},
                      "fullmail": {"type":  "boolean"},
                      "tracking": {"type":  "boolean"}
                    },
                    "additionalProperties": false
                  }
                },

                "required": [
                  "hmac",
                  "timestamp"
                ],
                "additionalProperties": false
              },
              {
                "properties": {
                  "resourceid": {
                    "type": "string"
                  },
                  "identifier": {
                    "type": "string"
                  },
                  "hmac": {
                    "$ref": "#/definitions/hmac"
                  },
                  "timestamp": {
                    "$ref": "#/definitions/timestamp"
                  },

                  "actionid": {
                    "const": "urn:onoffice-de-ns:smart:2.5:smartml:action:read"
                  },
                  "resourcetype": {
                    "const": "calendar"
                  },

                  "parameters": {
                    "type": "object",
                    "properties": {
                      "datestart": {"type":  "string"},
                      "dateend": {"type":  "string"},
                      "showcancelled": {"type":  "boolean"},
                      "users": {"type":  "array", "items":  {"type":  "integer"}},
                      "groups": {"type":  "array", "items":  {"type":  "integer"}},
                      "allusers": {"type":  "boolean"}
                    },
                    "additionalProperties": false
                  }
                },
                "required": ["hmac", "timestamp", "actionid"],
                "additionalProperties": false
              }
            ]
          }
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false,
  "required": [
    "token",
    "request"
  ]
}